
<head>
    
    <style>

        body{
            background-image: url('/img/CrudGeral.jpg');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        .mesaContainer{
            width: 100%;
            height: 600px;
            background-color: white;
            border-radius: 10px;
            display: flex;
        }
        .mesaOptions{
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid grey;
        }
        .Option{
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            border-bottom: 1px solid grey;
            border-right: 1px solid grey;
        }
        .Option:hover{
            background-color: grey;
            transition: 0.7s;
        }
        
        .mesaContentContainer{
            
            flex: 4;
            display: flex;
            flex-direction: column;
        }
        .OptionOptions{
            flex:1;
            display: flex;
            padding-left: 10px;
            border-bottom: 1px solid grey;
            padding: 10px;
        }
        .OptionsResults{
            
            flex: 7;
            display:flex;
            flex-direction: column;
            
            
        }
        .OptionsResultsResponse{
            height: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-left: 30px;            
            
        }
        .Pesquise{
            display: flex;
            justify-content: center;
            align-items: center;
            
        }
        .border-top{
            border-top: 1px solid rgb(63, 63, 63);
            padding-top: 10px;
            margin-bottom: 10px;
        }
        .aling{
            justify-content: center;
            align-self: center;
            justify-self: center;
            display: flex;
        }
        #OptionUltimo:hover{
            border-bottom-left-radius: 10px;
        }
        #OptionUM:hover{
            border-top-left-radius: 10px;
        }
    </style>
</head>

<body >
    
   <script>
       function tiraText(nodeList){
                    filhosFiltrados = []
                    cont = 0
                    nodeList.forEach((el)=>{
                        if(cont%2!=0){
                            filhosFiltrados.push(el)
                        }
                        cont++
                    })
                    return filhosFiltrados
                }
        
        function criaInputUser(){
            var campo = document.querySelector('.OptionOptions')
            campo.style.flex = '1'
            while(campo.childElementCount != 1){
                campo.removeChild(campo.lastChild)
            }

            var inputNome = document.createElement('input')
            inputNome.setAttribute('id','UsersCampoNome')
            inputNome.setAttribute('class','form-control')
            inputNome.setAttribute('placeholder','Nome completo do usúario')
            campo.appendChild(inputNome)

            var botao = document.getElementById('botao_')
            botao.removeAttribute('onclick')
            botao.setAttribute('onclick','filtraQueryUser()')
            botao.removeAttribute('disabled')
            botao.setAttribute('class','btn btn-success')
            
        }

        function filtraQueryUser(){
            var resultado = document.getElementById('Resultado')

            var OptionsResultsResponse = document.querySelector('.OptionsResultsResponse')
                
                resultado.style.overflowY = 'none'
                OptionsResultsResponse.style.paddingTop = '10px'
                OptionsResultsResponse.style.maxHeight = '100%'

            // removo filhos de pesquisa anterior
            filhosResultado = resultado.childNodes
            while(resultado.childElementCount > 0){
                filhosResultado.forEach((filho)=>{
                resultado.removeChild(filho)
                })
            }
            

            var inputNome = document.getElementById('UsersCampoNome')
            var NomeUserData = document.getElementById(`User-${inputNome.value}`)

            // agora vou remover os text com indice par

            var filhosNomeUserData = NomeUserData.childNodes
            console.log(filhosNomeUserData[0])
            filhosFiltrados = []
            for(i=0;i<filhosNomeUserData.length;i++){
                if(i%2!==0){
                    filhosFiltrados.push(filhosNomeUserData[i])
                }
            }

            filhosFiltrados.forEach((filho)=>{
                var para = document.createElement('p')

                para.innerHTML = '<strong>'+filho.getAttribute('id')+'</strong>'+` ${filho.value}`
                resultado.appendChild(para)

            })
            


        }
        
        function criaInputAluno(){
            var campo = document.querySelector('.OptionOptions')
            campo.style.flex = '1'
            
            while(campo.childElementCount != 1){
                campo.removeChild(campo.lastChild)
            }

            var inputNome = document.createElement('input')
            inputNome.setAttribute('id','UsersCampoNome')
            inputNome.setAttribute('class','form-control')
            inputNome.setAttribute('placeholder','Primeiro nome do aluno')
            campo.appendChild(inputNome)

            var botao = document.getElementById('botao_')
            botao.removeAttribute('onclick')
            botao.setAttribute('onclick','filtraQueryAluno()')
            botao.removeAttribute('disabled')
            botao.setAttribute('class','btn btn-success')
        }
        
        function filtraQueryAluno(){
            var resultado = document.getElementById('Resultado')

            // removo filhos de pesquisa anterior
            filhosResultado = resultado.childNodes
            while(resultado.childElementCount > 0){
                filhosResultado.forEach((filho)=>{
                resultado.removeChild(filho)
                })
            }

            var inputNome = document.getElementById('UsersCampoNome')
            var formNomeAluno = document.getElementById(`Aluno-${inputNome.value}`)
            var filhosFormNomeAluno = formNomeAluno.childNodes

            // removo filhos text com indice par
            filhosFiltradosFormNomeAluno = []
            for(i=0;i<filhosFormNomeAluno.length;i++){
                if(i % 2 !== 0){
                    filhosFiltradosFormNomeAluno.push(filhosFormNomeAluno[i])
                }
            }   
            //console.log(filhosFiltradosFormNomeAluno)

            // CONFIG DE SCROLL BAR PARA DIV RESULTADO
                var OptionsResultsResponse = document.querySelector('.OptionsResultsResponse')
                //OptionsResultsResponse.style.height = none
                resultado.style.overflowY = 'scroll'
                OptionsResultsResponse.style.paddingTop = '370px'
                OptionsResultsResponse.style.maxHeight = '38%'

            filhosFiltradosFormNomeAluno.forEach(filhoData=>{
                if(filhoData.getAttribute('name') !== 'nascimento'){//prop nascimento printa [object - object]
                    var para = document.createElement('p')
                    para.setAttribute('text-transform','capitalize')
                    para.innerHTML = `<strong>${(filhoData.getAttribute('name'))}</strong>: ${filhoData.value} `
                    
                    resultado.appendChild(para)
                }
                
            })
        }

        function criaInputMusculos(){
            //apago inputs caso ja tenha sido selecionado alguma opção
            var campo = document.querySelector('.OptionOptions')
            campo.style.flex = '1'
            while(campo.childElementCount != 1){
                campo.removeChild(campo.lastChild)
            }

            //Crio o elemento select
            var selectMusc = document.createElement('select')
            selectMusc.setAttribute('id','SelectMusc')
            selectMusc.setAttribute('class','form-control')

            //pego os valores do select
            var musculos = document.getElementsByClassName('musculo')
            for(i=0;i<musculos.length;i++){
                var opt = document.createElement('option')
                var conteudoOpt = document.createElement('small')
                conteudoOpt.innerHTML = `${musculos[i].getAttribute('id')}`
                opt.appendChild(conteudoOpt)

                opt.value = musculos[i].getAttribute('id')
                selectMusc.appendChild(opt)

            }
            campo.appendChild(selectMusc)

            var botao = document.getElementById('botao_')
            botao.removeAttribute('onclick')
            botao.setAttribute('onclick','filtraMusculo()')
            botao.removeAttribute('disabled')
            botao.setAttribute('class','btn btn-success')
            
        }
        
        function filtraMusculo(){
            var resultado = document.getElementById('Resultado')

            // seto configs da div resultado para o padrao
            resultado.style.overflowY = 'none'
            resultado.style.paddingTop = '10px'
            resultado.style.maxHeight = '100%'

            // removo filhos de pesquisa anterior
            filhosResultado = resultado.childNodes
            while(resultado.childElementCount > 0){
                filhosResultado.forEach((filho)=>{
                resultado.removeChild(filho)
                })
            }

            //Mostrar tudo sobre o musculo escolhido
            var muscEscolhido = document.getElementById('SelectMusc')// var que armazena musculo escolhido
                // conjunto de musculos
                var musculos = document.getElementsByClassName('musculo')

                //crio uma função que retorna o form do musculo esquelhido no select
                function retornaFormMusculoEscolhido(arrMusculos,MuscEscolhido){
                    for(i=0;i<arrMusculos.length;i++){
                        if(arrMusculos[i].getAttribute('id')== MuscEscolhido.value){
                            return arrMusculos[i]
                        }
                    }
                }

                formMuscEscolhido = retornaFormMusculoEscolhido(musculos,muscEscolhido)

                filhosFormMuscEscolhido = formMuscEscolhido.childNodes 

                filhosForm_sem_text = tiraText(filhosFormMuscEscolhido)
                //console.log(filhosForm_sem_text)

                

            //Agora vou mostrar na tela o conteudo dos forms
            cont = 0
            filhosForm_sem_text.forEach((el)=>{
                //console.log(el)
                if(cont<2){
                    var para = document.createElement('p')
                    para.innerHTML = `<strong>${el.getAttribute('name')} </strong>: ${el.value}`
                    resultado.appendChild(para)
                }else{
                    filhosEl = el.childNodes
                    filhosEl_sem_text = tiraText(filhosEl)
                    var paragraph = document.createElement('p')
                    paragraph.innerHTML = `<strong>Porções</strong>:`
                    filhosEl_sem_text.forEach((el)=>{
                        if(el.getAttribute('name')!='areaAdicional'){
                            paragraph.innerHTML += ` ${el.getAttribute('name')} |`
                        }
                        
                        
                    })
                    resultado.appendChild(paragraph)
                    console.log(filhosEl_sem_text)
                    filhosEl_sem_text.forEach((porcao)=>{
                        console.log()
                        var para = document.createElement('p')
                        if(porcao.getAttribute('name')=='areaAdicional'){
                            porcao.setAttribute('name','Exercícios adicionais') 
                        }
                        //if(porcao.getAttribute('name')=='maior')
                        if(porcao.parentNode.parentNode.getAttribute('id')=='Peitoral'){
                            if(porcao.getAttribute('name')=='Maior'){
                                var exerciciosPM = document.getElementById('PeitoralMaior')
                                para.innerHTML = `<strong>${porcao.getAttribute('name')} </strong>: ${exerciciosPM.value}`
                                resultado.appendChild(para)
                            }else{
                                para.innerHTML = `<strong>${porcao.getAttribute('name')} </strong>: ${porcao.value}`
                                resultado.appendChild(para)
                            }
                        }else{
                            if(porcao.parentNode.parentNode.getAttribute('id')=='Abdomen'){
                                if(porcao.getAttribute('name')=='Obliquo'){
                                    var exerciciosAO = document.getElementById('AbdomenObliquo')
                                    para.innerHTML = `<strong>${porcao.getAttribute('name')} </strong>: ${exerciciosAO.value}`
                                    resultado.appendChild(para)
                                }else{
                                    para.innerHTML = `<strong>${porcao.getAttribute('name')} </strong>: ${porcao.value}`
                                    resultado.appendChild(para)
                                }
                            }else{
                                para.innerHTML = `<strong>${porcao.getAttribute('name')} </strong>: ${porcao.value}`
                                resultado.appendChild(para)
                            }
                        }
                    })
                }
                cont++
            })
            var OptionsResultsResponse = document.querySelector('.OptionsResultsResponse')
                //OptionsResultsResponse.style.height = none
                resultado.style.overflowY = 'scroll'
                OptionsResultsResponse.style.paddingTop = '50px'
                OptionsResultsResponse.style.maxHeight = '80%'
        }
        
        function criaInputCross(){
            //limpar area onde aparecem inputs

            var area_de_pesquisa = document.querySelector('.OptionOptions')
            while(area_de_pesquisa.childElementCount != 1){
                area_de_pesquisa.removeChild(area_de_pesquisa.lastElementChild)
            }
            // criar inputs para pesquisa do cross
                //criar input que seleciona modo de pesquisa selecionar todos os exercicios, categoria, parte do corpo recrutada, uso de equipamento,nome do exercício ,ou exercicio com 4 condições expecificas!
                var divOpcoesCross = document.createElement('div')// div que irá guardaros inputs iniciais
                divOpcoesCross.setAttribute('id','opções de pesquisa Cross')
                divOpcoesCross.style.display = 'flex'
                divOpcoesCross.style.flex = '2.5'
                //divOpcoesCross.style.border = '1px dashed green'
                divOpcoesCross.style.marginRight = '5px'
                area_de_pesquisa.style.flex = '2'

                var divInput1 = document.createElement('div')// div para abrigar inputs
                divInput1.setAttribute('id','CrossInputs1')
                divInput1.style.display = 'flex'
                divInput1.style.flex = '1'
                divInput1.style.flexDirection = 'column'
                divInput1.style.alignItems = 'center'
                divInput1.style.justifyContent = 'center'
                

                var selectOption1 = document.createElement('select')// select com opções mostrar todos os musculos, categoria, parte do corpo, equipament, nome do exercicio, exercicio específico
                selectOption1.setAttribute('id','input_primeira_opcao_geral')
                selectOption1.setAttribute('class','form-control')

                arrOptionsSelectOption1 = ['Mostrar todos os exercicios','Categoria','Parte do corpo','Equipamento','Nome do exercício','Exercicio específico']
                arrOptionsSelectOption1.forEach((opcao)=>{
                    var optionSelectOption1 = document.createElement('option')
                    var conteudoOptionSelectOption1 = document.createElement('p')
                    var contedo = document.createTextNode(`${opcao}`)
                    conteudoOptionSelectOption1.appendChild(contedo)
                    optionSelectOption1.appendChild(conteudoOptionSelectOption1)
                    
                    optionSelectOption1.setAttribute('id',`${opcao}`)
                    optionSelectOption1.setAttribute('value',`${opcao}`)
                    selectOption1.appendChild(optionSelectOption1)
                })
                divInput1.appendChild(selectOption1)


                divOpcoesCross.appendChild(divInput1)
                


                var botaoProssiga = document.createElement('div')// Botão prossiga
                botaoProssiga.setAttribute('id','botaoProssiga')
                botaoProssiga.style.flex = '0.3'
                botaoProssiga.setAttribute('class','btn btn-success')
                botaoProssiga.setAttribute('onclick','verificaOption1Cross()')
                botaoProssiga.innerHTML = 'Prox'
                botaoProssiga.style.display = 'flex'
                botaoProssiga.style.alignItems = 'center'
                botaoProssiga.style.justifyContent = 'center'

                
                area_de_pesquisa.appendChild(divOpcoesCross)
                area_de_pesquisa.appendChild(botaoProssiga)

                var divNaoRemover = document.querySelector('.Pesquise')
                divNaoRemover.style.flex = '0.2'

            // mudar função do botao
            var botao = document.getElementById('botao_')
            botao.removeAttribute('onclick')
            botao.setAttribute('onclick','funcaoMasterCross()')
            botao.disabled = true
            
        }
        function verificaOption1Cross(){
            var botao = document.getElementById('botao_')
            var valorInput1 = document.getElementById('input_primeira_opcao_geral')
            var valorInput1Value = valorInput1.value
            if(valorInput1Value == 'Mostrar todos os exercicios'){
                botao.disabled = false
                botao.setAttribute('onclick','mostraTodosOsExerciciosCross()')
            }

        }
        function mostraTodosOsExerciciosCross(){
            console.log('mostra geral')
            var resultado = document.getElementById('Resultado')

            // seto configs da div resultado para o padrao
            resultado.style.overflowY = 'none'
            resultado.style.paddingTop = '10px'
            resultado.style.maxHeight = '100%'

            filhosResultado = resultado.childNodes
            while(resultado.childElementCount > 0){
                filhosResultado.forEach((filho)=>{
                resultado.removeChild(filho)
                })
            }
            var exerCross = document.getElementById('Cross')
            exerciciosCross = tiraText(exerCross.childNodes)
            exerciciosCross.forEach((el)=>{
                var divMainCrossExer = document.createElement('div')// div maior para mostrar exercicios cross
                divMainCrossExer.setAttribute('id',`Main${el.getAttribute('id')}`)
                divMainCrossExer.style.display = 'flex'
                divMainCrossExer.style.border = '1px solid black'

                var div1_2Main = document.createElement('div')// div que contera nome do exercicio
                div1_2Main.setAttribute('id',`1_2${el.getAttribute('id')}`)
                div1_2Main.style.flex = '1'
                div1_2Main.style.display = 'flex'
                div1_2Main.style.justifyContent = 'center'
                div1_2Main.style.alignItems = 'center'
                div1_2Main.innerHTML = `${el.getAttribute('id')}`

                var div2_2Main = document.createElement('div')
                div2_2Main.setAttribute('id',`2_2${el.getAttribute('id')}`)
                div2_2Main.style.display = 'flex'
                div2_2Main.style.flexDirection = 'column'
                div2_2Main.style.flex = '3'
                div2_2Main.style.justifyContent = 'center'
                div2_2Main.style.alignItems = 'center'


                //FALTA CRIAR AS DIVS QUE VÃO APARECER A CATEGORIA, PARTE DO CORPO E EQUIPAMENTO DO EXERCICIO

                

                divMainCrossExer.appendChild(div1_2Main)
                divMainCrossExer.appendChild(div2_2Main)



                resultado.appendChild(divMainCrossExer)
            })
            var OptionsResultsResponse = document.querySelector('.OptionsResultsResponse')
                //OptionsResultsResponse.style.height = none
                resultado.style.overflowY = 'scroll'
                OptionsResultsResponse.style.paddingTop = '930px'
                OptionsResultsResponse.style.maxHeight = '12%'
        }
    </script>
    
    <!--Users-->
    {{#each User}}
        <form action="" id="User-{{this.nome}}">
            <input type="hidden" id="User name:" value="{{this.userName}}">
            <input type="hidden" id="Nome:" value="{{this.nome}}">
            <input type="hidden" id="Nascimento:" value="{{this.nascimento2}}">
            <input type="hidden" id="Email:" value="{{this.email}}">
            <input type="hidden" id="Sexo:" value="{{this.sexo}}">
            <input type="hidden" id="É Admin:" value="{{this.EhAdmin}}">
        </form>
    {{/each}}
    <!--Alunos-->
    {{#each Alunos}}
        <form action="" id="Aluno-{{this.objNSNIPA.nome}}">
            {{#each this.objNSNIPA}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
            {{#each this.objMedidas}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
            {{#each this.objPesoKG_RMOG}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
            {{#each this.objPorcem}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
        </form>
    {{/each}}
    <!--MUSCULOS-->
    {{#each Musculos}}
        <form action="" class="musculo" id="{{this.nome}}" >
            <input type="hidden" name="Nome" value="{{this.nome}}">
            
            <input type="hidden" name="Região" value="{{this.regiao}}">
            <div id='Porções'>
            {{#each porcoes}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
            </div>
            
        </form>
    {{/each }}
    {{#if PeitoralMaior}}
        <input type="hidden" id="PeitoralMaior" value="{{PeitoralMaior}}">
    {{/if}}
    {{#if AbdomenObliquo}}
        <input type="hidden" id="AbdomenObliquo" value="{{AbdomenObliquo}}">
    {{/if}}
    <div type='hidden' id='Cross' >
        {{#each Cross}}
            <div type="hidden" id='{{this.exercicio.Nome_exercicio}}' name="{{this._id}}">
            {{#each exercicio}}
                <input type="hidden" name="{{@key}}" value="{{this}}">
            {{/each}}
            </div>
        {{/each}}
    </div>
    <div class="mesaContainer">
        <div class='mesaOptions'>
            <div class="Option" id="OptionUM" onclick="criaInputUser()">
                Users
            </div>
            <div class="Option" onclick="criaInputAluno()" >
                Alunos
            </div>
            <div class="Option" onclick="criaInputMusculos()">
                Musculação
            </div>
            <div class="Option" onclick="criaInputCross()">
                Cross
            </div>

        </div>
        <div class="mesaContentContainer">
            <div class="OptionOptions">
                <div class="Pesquise" style="padding-right: 10px;">
                    <h6>Pesquise por:</h6>
                </div>
                <div>

                </div>
                <div>

                </div>
            </div>
            <div class="OptionsResults">
                
                <div class="OptionsResultsResponse" id="Resultado">
                    
                </div>
                <div class="Pesquise border-top ">
                    <button class="btn btn-success aling"  id="botao_">pesquisar</button>
                </div>
                
            </div>
 
        </div>

    </div>
</body>



